# RAIM

source ~/toolchains/riscv/setpath.sh
autoreconf --install && ./configure ARCH=riscv MACH=riscv-virt --host=riscv64-unknown-elf --disable-wextra --disable-waddress --disable-wconversion
make


# bbl (should build RAIM bootloader first)

source ~/toolchains/riscv/setpath.sh
cd riscv-pk
mkdir build
cd build
../configure --host=riscv64-unknown-elf --enable-print-device-tree --enable-logo --with-payload=../../RAIM/boot/boot.bin
make && qemu-system-riscv64 -m 1024 -nographic -machine virt -kernel bbl -initrd ../../RAIM/kern/vmraim.elf -d guest_errors




//// 文档

bbl: 第一阶段启动，负责从machine mode进入supervisor mode；另外提供一些实用功能（如打印字符、关机等）；在编译时要用--with-payload=../../RAIM/boot/boot.bin把我们的raim-bootloader加进去
raim-bootloader：负责加载RAIM的ELF文件


WIRI Writes-Ignored, Reads-Ignore field /// from SiFive-U5-Coreplex-v1.0.pdf
WPRI Writes-Preserve Reads-Ignore field.
WLRL Write-Legal, Read-Legal field.
WARL Write-Any Read-Legal field.


AS_VAR_SET([__with_ram_physbase], [0x0000000080000000])  RAM_PHYSBASE
AS_VAR_SET([__with_kern_start],   [0x0000000082000000])  KERN_START
AS_VAR_SET([__with_kern_base],    [0xffffffe002000000])  KERN_BASE
AS_VAR_SET([__with_mem_size],     [0x0000000010000000])  MEM_SIZE
